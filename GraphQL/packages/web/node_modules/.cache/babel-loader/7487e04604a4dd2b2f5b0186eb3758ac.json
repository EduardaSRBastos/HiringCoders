{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Duda Bastos\\\\Desktop\\\\Programing\\\\Hiring Coders\\\\GraphQL\\\\packages\\\\web\\\\src\\\\components\\\\ClientList.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport gql from 'graphql-tag';\nimport { useQuery } from 'react-apollo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GET_CLIENT_LIST = gql`\n  query GET_CLIENT_LIST($skip: Int!, $take: Int!) {\n    clients(options: { skip: $skip, take: $take }) {\n      items {\n        id\n        name\n        email\n      }\n      totalItems\n    }\n  }\n`;\nconst PAGE_SIZE = 10;\nexport function ClientList(_ref) {\n  _s();\n\n  var _data$clients$items;\n\n  let {\n    onSelectClient\n  } = _ref;\n  const {\n    data,\n    error,\n    loading,\n    fetchMore\n  } = useQuery(GET_CLIENT_LIST, {\n    fetchPolicy: 'cache-and-network',\n    variables: {\n      skip: 0,\n      take: PAGE_SIZE\n    }\n  });\n  const clients = (_data$clients$items = data === null || data === void 0 ? void 0 : data.clients.items) !== null && _data$clients$items !== void 0 ? _data$clients$items : [];\n\n  const handleSelectClient = client => () => onSelectClient === null || onSelectClient === void 0 ? void 0 : onSelectClient(client.id);\n\n  const handleLoadMore = () => {\n    fetchMore({\n      variables: {\n        skip: data.clients.items.length,\n        take: PAGE_SIZE\n      },\n      updateQuery: (result, _ref2) => {\n        let {\n          fetchMoreResult\n        } = _ref2;\n        if (!fetchMoreResult) return result;\n        return { ...result,\n          clients: { ...result.clients,\n            items: result.clients.items.concat(fetchMoreResult.clients.items),\n            totalItems: fetchMoreResult.clients.totalItems\n          }\n        };\n      }\n    });\n  };\n\n  if (error) return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"Erro ao buscar os clientes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 7\n  }, this);\n  if (loading && !data) return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Carregando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 7\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      children: clients.map(client => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: handleSelectClient(client),\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: client.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: client.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, client.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      disabled: loading,\n      onClick: handleLoadMore,\n      children: \"Carregar mais\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ClientList, \"H5Blujjb5lnbExdzVNMGHM2BI7U=\", false, function () {\n  return [useQuery];\n});\n\n_c = ClientList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClientList\");","map":{"version":3,"names":["React","gql","useQuery","GET_CLIENT_LIST","PAGE_SIZE","ClientList","onSelectClient","data","error","loading","fetchMore","fetchPolicy","variables","skip","take","clients","items","handleSelectClient","client","id","handleLoadMore","length","updateQuery","result","fetchMoreResult","concat","totalItems","map","name","email"],"sources":["C:/Users/Duda Bastos/Desktop/Programing/Hiring Coders/GraphQL/packages/web/src/components/ClientList.js"],"sourcesContent":["import React from 'react';\r\nimport gql from 'graphql-tag';\r\nimport { useQuery } from 'react-apollo';\r\n\r\nconst GET_CLIENT_LIST = gql`\r\n  query GET_CLIENT_LIST($skip: Int!, $take: Int!) {\r\n    clients(options: { skip: $skip, take: $take }) {\r\n      items {\r\n        id\r\n        name\r\n        email\r\n      }\r\n      totalItems\r\n    }\r\n  }\r\n`;\r\n\r\nconst PAGE_SIZE = 10;\r\n\r\nexport function ClientList({ onSelectClient }) {\r\n  const { data, error, loading, fetchMore } = useQuery(GET_CLIENT_LIST, {\r\n    fetchPolicy: 'cache-and-network',\r\n    variables: {\r\n      skip: 0,\r\n      take: PAGE_SIZE,\r\n    },\r\n  });\r\n\r\n  const clients = data?.clients.items ?? [];\r\n\r\n  const handleSelectClient = (client) => () => onSelectClient?.(client.id);\r\n\r\n  const handleLoadMore = () => {\r\n    fetchMore({\r\n      variables: {\r\n        skip: data.clients.items.length,\r\n        take: PAGE_SIZE,\r\n      },\r\n      updateQuery: (result, { fetchMoreResult }) => {\r\n        if (!fetchMoreResult) return result;\r\n\r\n        return {\r\n          ...result,\r\n          clients: {\r\n            ...result.clients,\r\n            items: result.clients.items.concat(fetchMoreResult.clients.items),\r\n            totalItems: fetchMoreResult.clients.totalItems,\r\n          },\r\n        };\r\n      },\r\n    });\r\n  };\r\n\r\n  if (error)\r\n    return (\r\n      <section>\r\n        <strong>Erro ao buscar os clientes</strong>\r\n      </section>\r\n    );\r\n\r\n  if (loading && !data)\r\n    return (\r\n      <section>\r\n        <p>Carregando...</p>\r\n      </section>\r\n    );\r\n\r\n  return (\r\n    <section>\r\n      <ul>\r\n        {clients.map((client) => (\r\n          <li key={client.id} onClick={handleSelectClient(client)}>\r\n            <p>{client.name}</p>\r\n            <p>{client.email}</p>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <button type=\"button\" disabled={loading} onClick={handleLoadMore}>\r\n        Carregar mais\r\n      </button>\r\n    </section>\r\n  );\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,QAAT,QAAyB,cAAzB;;AAEA,MAAMC,eAAe,GAAGF,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAXA;AAaA,MAAMG,SAAS,GAAG,EAAlB;AAEA,OAAO,SAASC,UAAT,OAAwC;EAAA;;EAAA;;EAAA,IAApB;IAAEC;EAAF,CAAoB;EAC7C,MAAM;IAAEC,IAAF;IAAQC,KAAR;IAAeC,OAAf;IAAwBC;EAAxB,IAAsCR,QAAQ,CAACC,eAAD,EAAkB;IACpEQ,WAAW,EAAE,mBADuD;IAEpEC,SAAS,EAAE;MACTC,IAAI,EAAE,CADG;MAETC,IAAI,EAAEV;IAFG;EAFyD,CAAlB,CAApD;EAQA,MAAMW,OAAO,0BAAGR,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEQ,OAAN,CAAcC,KAAjB,qEAA0B,EAAvC;;EAEA,MAAMC,kBAAkB,GAAIC,MAAD,IAAY,MAAMZ,cAAN,aAAMA,cAAN,uBAAMA,cAAc,CAAGY,MAAM,CAACC,EAAV,CAA3D;;EAEA,MAAMC,cAAc,GAAG,MAAM;IAC3BV,SAAS,CAAC;MACRE,SAAS,EAAE;QACTC,IAAI,EAAEN,IAAI,CAACQ,OAAL,CAAaC,KAAb,CAAmBK,MADhB;QAETP,IAAI,EAAEV;MAFG,CADH;MAKRkB,WAAW,EAAE,CAACC,MAAD,YAAiC;QAAA,IAAxB;UAAEC;QAAF,CAAwB;QAC5C,IAAI,CAACA,eAAL,EAAsB,OAAOD,MAAP;QAEtB,OAAO,EACL,GAAGA,MADE;UAELR,OAAO,EAAE,EACP,GAAGQ,MAAM,CAACR,OADH;YAEPC,KAAK,EAAEO,MAAM,CAACR,OAAP,CAAeC,KAAf,CAAqBS,MAArB,CAA4BD,eAAe,CAACT,OAAhB,CAAwBC,KAApD,CAFA;YAGPU,UAAU,EAAEF,eAAe,CAACT,OAAhB,CAAwBW;UAH7B;QAFJ,CAAP;MAQD;IAhBO,CAAD,CAAT;EAkBD,CAnBD;;EAqBA,IAAIlB,KAAJ,EACE,oBACE;IAAA,uBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;EAMF,IAAIC,OAAO,IAAI,CAACF,IAAhB,EACE,oBACE;IAAA,uBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;EAMF,oBACE;IAAA,wBACE;MAAA,UACGQ,OAAO,CAACY,GAAR,CAAaT,MAAD,iBACX;QAAoB,OAAO,EAAED,kBAAkB,CAACC,MAAD,CAA/C;QAAA,wBACE;UAAA,UAAIA,MAAM,CAACU;QAAX;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAA,UAAIV,MAAM,CAACW;QAAX;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA,GAASX,MAAM,CAACC,EAAhB;QAAA;QAAA;QAAA;MAAA,QADD;IADH;MAAA;MAAA;MAAA;IAAA,QADF,eASE;MAAQ,IAAI,EAAC,QAAb;MAAsB,QAAQ,EAAEV,OAAhC;MAAyC,OAAO,EAAEW,cAAlD;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QATF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAeD;;GA/Def,U;UAC8BH,Q;;;KAD9BG,U"},"metadata":{},"sourceType":"module"}